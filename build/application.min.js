/*! taskmanager 2016-04-21 */
angular.module("taskmanager",["ionic","taskmanager.controllers","taskmanager.services","taskmanager.directives"]).run(function(a){a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).config(function(a,b){a.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.home",{url:"/home",views:{menuContent:{templateUrl:"templates/home.html"}}}).state("app.tasks",{url:"/tasks",views:{menuContent:{templateUrl:"templates/tasks.html",controller:"TasksCtrl"}}}),b.otherwise("/app/home")}),angular.module("taskmanager.controllers",[]).controller("AppCtrl",function(a,b,c){}).controller("TasksCtrl",function(a,b,c){a.newEvent={},a.showing=!1,c.get("https://s3-eu-west-1.amazonaws.com/appointedd-assets/tasks.json?callback=JSON_CALLBACK").success(function(b){a.httpObject=b.tasks,window.localStorage.events=JSON.stringify(a.httpObject),console.log(b.tasks[1].description)}),a.tasks=b.all(),a.remove=function(a){b.remove(a)},a.add=function(){b.add(a.newEvent),a.showing=!1,a.newEvent={}},a.showAdd=function(){a.showing=!0},a.isDue=function(a){var b=new Date,c=new Date(a.due_date),d=c.getFullYear(),e=c.getMonth(),f=c.getDate(),g=new Date(d,e,f);if(g.getTime()<b.getTime())return"The task is already done";var h=6e4,i=60*h,j=24*i,k=g.getTime(),l=k-b.getTime(),m=Math.floor(l/j);l-=m*j;var n="Due in ";return n+=m+1+" day",1!=m&&(n+="s"),n+="."}}),angular.module("taskmanager.directives",[]).directive("apTaskItem",function(){return{restrict:"E",templateUrl:"/templates/task-list.html"}}),angular.module("taskmanager.services",[]).factory("Events",function(a){var b=[];return{all:function(){return window.localStorage.events?b=JSON.parse(window.localStorage.events):(window.localStorage.events=[],b=JSON.parse(window.localStorage.events)),b},remove:function(a){b.splice(b.indexOf(a),1),window.localStorage.events=JSON.stringify(b)},get:function(a){return b[a]},add:function(a){var c={description:a.description,due_date:a.due_date};b.push(c),window.localStorage.events=JSON.stringify(b)},lastId:function(){var a=0;return angular.forEach(b,function(b){b.id>a&&(a=b.id)}),a}}});